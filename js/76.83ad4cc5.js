"use strict";(self["webpackChunkerabbit_pc_project"]=self["webpackChunkerabbit_pc_project"]||[]).push([[76],{8262:function(e,t,a){a.d(t,{Z:function(){return g}});var s=a(3396),r=a(7139);const o=["src"],i={class:"name ellipsis"},n={class:"desc ellipsis"},l={class:"price"};function c(e,t,a,c,d,u){const p=(0,s.up)("RouterLink");return(0,s.wg)(),(0,s.j4)(p,{to:`/product/${a.goods.id}`,class:"goods-item"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:a.goods.picture,alt:""},null,8,o),(0,s._)("p",i,(0,r.zw)(a.goods.name),1),(0,s._)("p",n,(0,r.zw)(a.goods.desc),1),(0,s._)("p",l,"¥"+(0,r.zw)(a.goods.price),1)])),_:1},8,["to"])}var d={name:"GoodsItem",props:{goods:{type:Object,default:()=>{}}}},u=a(89);const p=(0,u.Z)(d,[["render",c],["__scopeId","data-v-bd0b9e64"]]);var g=p},8076:function(e,t,a){a.r(t),a.d(t,{default:function(){return q}});var s=a(3396);const r={class:"sub-category"},o={class:"container"},i={class:"goods-list"};function n(e,t,a,n,l,c){const d=(0,s.up)("SubBread"),u=(0,s.up)("SubFilter"),p=(0,s.up)("SubSort"),g=(0,s.up)("GoodsItem"),m=(0,s.up)("XtxInfiniteLoading");return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("div",o,[(0,s.Wm)(d),(0,s.Wm)(u,{onFilterChange:n.changeFilter},null,8,["onFilterChange"]),(0,s._)("div",i,[(0,s.Wm)(p,{onSortChange:n.sortChange},null,8,["onSortChange"]),(0,s._)("ul",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.goodsList,(e=>((0,s.wg)(),(0,s.iD)("li",{key:e.i},[(0,s.Wm)(g,{goods:e},null,8,["goods"])])))),128))]),(0,s.Wm)(m,{loading:n.loading,finished:n.finished,onInfinite:n.getData},null,8,["loading","finished","onInfinite"])])])])}a(7658);var l=a(7139),c=a(9242);function d(e,t,a,r,o,i){const n=(0,s.up)("XtxBreadItem"),d=(0,s.up)("XtxBread");return(0,s.wg)(),(0,s.j4)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)(n,{to:"/"},{default:(0,s.w5)((()=>[(0,s.Uk)("首页")])),_:1}),r.category.top?((0,s.wg)(),(0,s.j4)(n,{key:0,to:`/category/${r.category.top.id}`},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(r.category.top.name),1)])),_:1},8,["to"])):(0,s.kq)("",!0),(0,s.Wm)(c.uT,{name:"fade-right",mode:"out-in"},{default:(0,s.w5)((()=>[r.category.sub?((0,s.wg)(),(0,s.j4)(n,{key:r.category.sub.id},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(r.category.sub.name),1)])),_:1})):(0,s.kq)("",!0)])),_:1})])),_:1})}var u=a(2483),p=a(65),g={name:"SubBread",setup(){const e=(0,u.yj)(),t=(0,p.oR)(),a=(0,s.Fl)((()=>{const a={};return t.state.category.list.forEach((t=>{if(t.children){const s=t.children.find((t=>t.id===e.params.id));s&&(a.top={id:t.id,name:t.name},a.sub={id:s.id,name:s.name})}})),a}));return{category:a}}},m=a(89);const h=(0,m.Z)(g,[["render",d]]);var v=h;const f=e=>((0,s.dD)("data-v-721f5744"),e=e(),(0,s.Cn)(),e),_={key:0,class:"sub-filter"},w={class:"item"},k=f((()=>(0,s._)("div",{class:"head"},"品牌：",-1))),b={class:"body"},y=["onClick"],C={class:"head"},S={class:"body"},D=["onClick"],P={key:1,class:"sub-filter"};function j(e,t,a,r,o,i){const n=(0,s.up)("XtxSkeleton");return r.filterData&&!r.filterLoading?((0,s.wg)(),(0,s.iD)("div",_,[(0,s._)("div",w,[k,(0,s._)("div",b,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.filterData.brands,(e=>((0,s.wg)(),(0,s.iD)("a",{onClick:t=>r.changeBrand(e.id),class:(0,l.C_)({active:r.filterData.selectedBrand===e.id}),href:"javascript:;",key:e.id},(0,l.zw)(e.name),11,y)))),128))])]),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(r.filterData.saleProperties,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"item",key:e.id},[(0,s._)("div",C,(0,l.zw)(e.name)+":",1),(0,s._)("div",S,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.properties,(t=>((0,s.wg)(),(0,s.iD)("a",{onClick:a=>r.changeAttr(e,t.id),class:(0,l.C_)({active:e.selectedProp===t.id}),href:"javascript:;",key:t.id},(0,l.zw)(t.name),11,D)))),128))])])))),128))])):((0,s.wg)(),(0,s.iD)("div",P,[(0,s.Wm)(n,{class:"item",width:"800px",height:"40px"}),(0,s.Wm)(n,{class:"item",width:"800px",height:"40px"}),(0,s.Wm)(n,{class:"item",width:"600px",height:"40px"}),(0,s.Wm)(n,{class:"item",width:"600px",height:"40px"}),(0,s.Wm)(n,{class:"item",width:"600px",height:"40px"})]))}a(541);var F=a(588),x=a(4870),W={name:"SubFilter",setup(e,{emit:t}){const a=(0,u.yj)(),r=(0,x.iH)(null),o=(0,x.iH)(!1);(0,s.YP)((()=>a.params.id),((e,t)=>{e&&a.path==="/category/sub/"+e&&(o.value=!0,e&&(0,F.qu)(a.params.id).then((({result:e})=>{e.selectedBrand=null,e.brands.unshift({id:null,name:"全部"}),e.saleProperties.forEach((e=>{e.selectedProp=null,e.properties.unshift({id:null,name:"全部"})})),r.value=e,o.value=!1})))}),{immediate:!0});const i=()=>{const e={},t=[];return e.brandId=r.value.selectedBrand,r.value.saleProperties.forEach((e=>{const a=e.properties.find((t=>t.id===e.selectedProp));a&&void 0!==a.id&&t.push({groupName:e.name,propertyName:a.name})})),t.length&&(e.attrs=t),e},n=e=>{r.value.selectedBrand!==e&&(r.value.selectedBrand=e,t("filter-change",i()))},l=(e,a)=>{e.selectedProp!==a&&(e.selectedProp=a,t("filter-change",i()))};return{filterData:r,filterLoading:o,changeBrand:n,changeAttr:l}}};const I=(0,m.Z)(W,[["render",j],["__scopeId","data-v-721f5744"]]);var B=I;const z={class:"sub-sort"},H={class:"sort"},M={class:"check"};function U(e,t,a,r,o,i){const n=(0,s.up)("XtxCheckbox");return(0,s.wg)(),(0,s.iD)("div",z,[(0,s._)("div",H,[(0,s._)("a",{class:(0,l.C_)({active:null===r.sortParams.sortField}),onClick:t[0]||(t[0]=e=>r.changeSort(null)),href:"javascript:;"},"默认排序",2),(0,s._)("a",{class:(0,l.C_)({active:"publishTime"===r.sortParams.sortField}),onClick:t[1]||(t[1]=e=>r.changeSort("publishTime")),href:"javascript:;"},"最新商品",2),(0,s._)("a",{class:(0,l.C_)({active:"orderNum"===r.sortParams.sortField}),onClick:t[2]||(t[2]=e=>r.changeSort("orderNum")),href:"javascript:;"},"最高人气",2),(0,s._)("a",{class:(0,l.C_)({active:"evaluateNum"===r.sortParams.sortField}),onClick:t[3]||(t[3]=e=>r.changeSort("evaluateNum")),href:"javascript:;"},"评论最多",2),(0,s._)("a",{onClick:t[4]||(t[4]=e=>r.changeSort("price")),href:"javascript:;"},[(0,s.Uk)(" 价格排序 "),(0,s._)("i",{class:(0,l.C_)(["arrow up",{active:"price"===r.sortParams.sortField&&"asc"==r.sortParams.sortMethod}])},null,2),(0,s._)("i",{class:(0,l.C_)(["arrow down",{active:"price"===r.sortParams.sortField&&"desc"==r.sortParams.sortMethod}])},null,2)])]),(0,s._)("div",M,[(0,s.Wm)(n,{onClick:r.changeCheck,modelValue:r.sortParams.inventory,"onUpdate:modelValue":t[5]||(t[5]=e=>r.sortParams.inventory=e)},{default:(0,s.w5)((()=>[(0,s.Uk)("仅显示有货商品")])),_:1},8,["onClick","modelValue"]),(0,s.Wm)(n,{onClick:r.changeCheck,modelValue:r.sortParams.onlyDiscount,"onUpdate:modelValue":t[6]||(t[6]=e=>r.sortParams.onlyDiscount=e)},{default:(0,s.w5)((()=>[(0,s.Uk)("仅显示特惠商品")])),_:1},8,["onClick","modelValue"])])])}var Z={name:"SubSort",setup(e,{emit:t}){const a=(0,x.qj)({inventory:!1,onlyDiscount:!1,sortField:null,sortMethod:null}),s=e=>{if("price"===e)a.sortField=e,null===a.sortMethod?a.sortMethod="desc":a.sortMethod="desc"===a.sortMethod?"asc":"desc";else{if(a.sortField===e)return;a.sortField=e,a.sortMethod=null}t("sort-change",a)},r=()=>{t("sort-change",a)};return{sortParams:a,changeSort:s,changeCheck:r}}};const L=(0,m.Z)(Z,[["render",U],["__scopeId","data-v-0f0c0657"]]);var N=L,V=a(8262),Y={name:"SubCategory",components:{SubBread:v,SubFilter:B,SubSort:N,GoodsItem:V.Z},setup(){const e=(0,u.yj)(),t=(0,x.iH)(!1),a=(0,x.iH)(!1),r=(0,x.iH)([]);let o={page:1,pageSize:20};const i=()=>{t.value=!0,o.categoryId=e.params.id,(0,F.Sm)(o).then((({result:e})=>{e.items.length?(r.value.push(...e.items),o.page++):a.value=!0,t.value=!1}))};(0,s.YP)((()=>e.params.id),(t=>{t&&e.path==="/category/sub/"+t&&(r.value=[],o={page:1,pageSize:20},a.value=!1)}));const n=e=>{a.value=!1,o={...o,...e},o.page=1,r.value=[]},l=e=>{o={...o,...e},o.page=1,r.value=[],a.value=!1};return{getData:i,loading:t,finished:a,goodsList:r,sortChange:n,changeFilter:l}}};const X=(0,m.Z)(Y,[["render",n],["__scopeId","data-v-57ab1dbf"]]);var q=X}}]);
//# sourceMappingURL=76.83ad4cc5.js.map