"use strict";(self["webpackChunkerabbit_pc_project"]=self["webpackChunkerabbit_pc_project"]||[]).push([[261],{8391:function(e,t,a){var n=a(3396),r=a(9242),i=a(5435);const o=document.createElement("div");o.setAttribute("class","xtx-message-container"),document.body.appendChild(o);let l=null;t["Z"]=({type:e,text:t})=>{const a=(0,n.Wm)(i["default"],{type:e,text:t});(0,r.sY)(a,o),clearTimeout(l),l=setTimeout((()=>{(0,r.sY)(null,o)}),3e3)}},2261:function(e,t,a){a.r(t),a.d(t,{default:function(){return Ut}});var n=a(3396),r=a(7139),i=a(3947);const o=e=>((0,n.dD)("data-v-7a586a6e"),e=e(),(0,n.Cn)(),e),l={class:"login-section"},s={class:"wrapper"},u={key:1,class:"qrcode-box"},c=o((()=>(0,n._)("img",{src:i,alt:""},null,-1))),d=o((()=>(0,n._)("p",null,[(0,n.Uk)("打开 "),(0,n._)("a",{href:"javascript:;"},"小兔鲜App"),(0,n.Uk)(" 扫码登录")],-1))),v=[c,d];function f(e,t,a,i,o,c){const d=(0,n.up)("LoginHeader"),f=(0,n.up)("LoginForm"),m=(0,n.up)("LoginFooter");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(d,null,{default:(0,n.w5)((()=>[(0,n.Uk)("欢迎登录")])),_:1}),(0,n._)("section",l,[(0,n._)("div",s,[(0,n._)("nav",null,[(0,n._)("a",{onClick:t[0]||(t[0]=e=>i.activeName="account"),class:(0,r.C_)({active:"account"===i.activeName}),href:"javascript:;"},"账户登录",2),(0,n._)("a",{onClick:t[1]||(t[1]=e=>i.activeName="qrcode"),class:(0,r.C_)({active:"qrcode"===i.activeName}),href:"javascript:;"},"扫码登录",2)]),"account"===i.activeName?((0,n.wg)(),(0,n.j4)(f,{key:0})):(0,n.kq)("",!0),"qrcode"===i.activeName?((0,n.wg)(),(0,n.iD)("div",u,v)):(0,n.kq)("",!0)])]),(0,n.Wm)(m)],64)}const m=e=>((0,n.dD)("data-v-08c5081e"),e=e(),(0,n.Cn)(),e),p={class:"login-header"},h={class:"container"},y={class:"logo"},g={class:"sub"},b=m((()=>(0,n._)("i",{class:"iconfont icon-angle-right"},null,-1))),_=m((()=>(0,n._)("i",{class:"iconfont icon-angle-right"},null,-1)));function V(e,t,a,r,i,o){const l=(0,n.up)("RouterLink");return(0,n.wg)(),(0,n.iD)("header",p,[(0,n._)("div",h,[(0,n._)("h1",y,[(0,n.Wm)(l,{to:"/"},{default:(0,n.w5)((()=>[(0,n.Uk)("小兔鲜")])),_:1})]),(0,n._)("h3",g,[(0,n.WI)(e.$slots,"default",{},void 0,!0)]),(0,n.Wm)(l,{class:"entry",to:"/"},{default:(0,n.w5)((()=>[(0,n.Uk)(" 进入网站首页 "),b,_])),_:1})])])}var w={name:"LoginHeader"},k=a(89);const F=(0,k.Z)(w,[["render",V],["__scopeId","data-v-08c5081e"]]);var S=F;const j={class:"login-footer"},A=(0,n.uE)('<div class="container" data-v-17badf56><p data-v-17badf56><a href="javascript:;" data-v-17badf56>关于我们</a><a href="javascript:;" data-v-17badf56>帮助中心</a><a href="javascript:;" data-v-17badf56>售后服务</a><a href="javascript:;" data-v-17badf56>配送与验收</a><a href="javascript:;" data-v-17badf56>商务合作</a><a href="javascript:;" data-v-17badf56>搜索推荐</a><a href="javascript:;" data-v-17badf56>友情链接</a></p><p data-v-17badf56>CopyRight © 小兔鲜儿</p></div>',1),O=[A];function U(e,t,a,r,i,o){return(0,n.wg)(),(0,n.iD)("footer",j,O)}var E={name:"LoginFooter"};const D=(0,k.Z)(E,[["render",U],["__scopeId","data-v-17badf56"]]);var C=D;const x=e=>((0,n.dD)("data-v-371ea89e"),e=e(),(0,n.Cn)(),e),M={class:"account-box"},T={class:"toggle"},q=x((()=>(0,n._)("i",{class:"iconfont icon-user"},null,-1))),L=x((()=>(0,n._)("i",{class:"iconfont icon-msg"},null,-1))),B={class:"form-item"},I={class:"input"},R=x((()=>(0,n._)("i",{class:"iconfont icon-user"},null,-1))),Z={key:0,class:"error"},H=x((()=>(0,n._)("i",{class:"iconfont icon-warning"},null,-1))),N={class:"form-item"},$={class:"input"},P=x((()=>(0,n._)("i",{class:"iconfont icon-lock"},null,-1))),Y={key:0,class:"error"},W=x((()=>(0,n._)("i",{class:"iconfont icon-warning"},null,-1))),z={class:"form-item"},J={class:"input"},X=x((()=>(0,n._)("i",{class:"iconfont icon-user"},null,-1))),G={key:0,class:"error"},K=x((()=>(0,n._)("i",{class:"iconfont icon-warning"},null,-1))),Q={class:"form-item"},ee={class:"input"},te=x((()=>(0,n._)("i",{class:"iconfont icon-code"},null,-1))),ae={key:0,class:"error"},ne=x((()=>(0,n._)("i",{class:"iconfont icon-warning"},null,-1))),re={class:"form-item"},ie={class:"agree"},oe=x((()=>(0,n._)("span",null,"我已同意",-1))),le=x((()=>(0,n._)("a",{href:"javascript:;"},"《隐私条款》",-1))),se=x((()=>(0,n._)("span",null,"和",-1))),ue=x((()=>(0,n._)("a",{href:"javascript:;"},"《服务条款》",-1))),ce={key:0,class:"error"},de=x((()=>(0,n._)("i",{class:"iconfont icon-warning"},null,-1))),ve=(0,n.uE)('<div class="action" data-v-371ea89e><img src="https://qzonestyle.gtimg.cn/qzone/vas/opensns/res/img/Connect_logo_7.png" alt="" data-v-371ea89e><div class="url" data-v-371ea89e><a href="javascript:;" data-v-371ea89e>忘记密码</a><a href="javascript:;" data-v-371ea89e>免费注册</a></div></div>',1);function fe(e,t,a,i,o,l){const s=(0,n.up)("Field"),u=(0,n.up)("Form");return(0,n.wg)(),(0,n.iD)("div",M,[(0,n._)("div",T,[i.isMsgLogin?((0,n.wg)(),(0,n.iD)("a",{key:0,onClick:t[0]||(t[0]=e=>i.isMsgLogin=!1),href:"javascript:;"},[q,(0,n.Uk)(" 使用账号登录 ")])):((0,n.wg)(),(0,n.iD)("a",{key:1,onClick:t[1]||(t[1]=e=>i.isMsgLogin=!0),href:"javascript:;"},[L,(0,n.Uk)(" 使用短信登录 ")]))]),(0,n.Wm)(u,{ref:"formCom",class:"form","validation-schema":i.scheam,autocomplete:"off"},{default:(0,n.w5)((({errors:e})=>[i.isMsgLogin?((0,n.wg)(),(0,n.iD)(n.HY,{key:1},[(0,n._)("div",z,[(0,n._)("div",J,[X,(0,n.Wm)(s,{modelValue:i.form.mobile,"onUpdate:modelValue":t[4]||(t[4]=e=>i.form.mobile=e),name:"mobile",type:"text",placeholder:"请输入手机号"},null,8,["modelValue"])]),e.mobile?((0,n.wg)(),(0,n.iD)("div",G,[K,(0,n.Uk)((0,r.zw)(e.mobile),1)])):(0,n.kq)("",!0)]),(0,n._)("div",Q,[(0,n._)("div",ee,[te,(0,n.Wm)(s,{class:(0,r.C_)({error:e.code}),modelValue:i.form.code,"onUpdate:modelValue":t[5]||(t[5]=e=>i.form.code=e),name:"code",type:"password",placeholder:"请输入验证码"},null,8,["class","modelValue"]),(0,n._)("span",{onClick:t[6]||(t[6]=e=>i.send()),class:"code"},(0,r.zw)(0===i.time?"发送验证码":`${i.time}秒后发送`),1)]),e.code?((0,n.wg)(),(0,n.iD)("div",ae,[ne,(0,n.Uk)((0,r.zw)(e.code),1)])):(0,n.kq)("",!0)])],64)):((0,n.wg)(),(0,n.iD)(n.HY,{key:0},[(0,n._)("div",B,[(0,n._)("div",I,[R,(0,n.Wm)(s,{class:(0,r.C_)({error:e.account}),modelValue:i.form.account,"onUpdate:modelValue":t[2]||(t[2]=e=>i.form.account=e),name:"account",type:"text",placeholder:"请输入用户名"},null,8,["class","modelValue"])]),e.account?((0,n.wg)(),(0,n.iD)("div",Z,[H,(0,n.Uk)((0,r.zw)(e.account),1)])):(0,n.kq)("",!0)]),(0,n._)("div",N,[(0,n._)("div",$,[P,(0,n.Wm)(s,{class:(0,r.C_)({error:e.password}),modelValue:i.form.password,"onUpdate:modelValue":t[3]||(t[3]=e=>i.form.password=e),name:"password",type:"password",placeholder:"请输入密码"},null,8,["class","modelValue"])]),e.password?((0,n.wg)(),(0,n.iD)("div",Y,[W,(0,n.Uk)((0,r.zw)(e.password),1)])):(0,n.kq)("",!0)])],64)),(0,n._)("div",re,[(0,n._)("div",ie,[(0,n.Wm)(s,{as:"XtxCheckbox",name:"isAgree",modelValue:i.form.isAgree,"onUpdate:modelValue":t[7]||(t[7]=e=>i.form.isAgree=e)},null,8,["modelValue"]),oe,le,se,ue]),e.isAgree?((0,n.wg)(),(0,n.iD)("div",ce,[de,(0,n.Uk)((0,r.zw)(e.isAgree),1)])):(0,n.kq)("",!0)]),(0,n._)("a",{onClick:t[8]||(t[8]=e=>i.login()),href:"javascript:;",class:"btn"},"登 录")])),_:1},8,["validation-schema"]),ve])}a(7658);var me=a(4870);a(1703);
/**
  * vee-validate v4.0.3
  * (c) 2020 Abdelrahman Awad
  * @license MIT
  */
function pe(e){return"function"===typeof e}const he=e=>null!==e&&!!e&&"object"===typeof e&&!Array.isArray(e),ye={};function ge(e){return ye[e]}function be(e){return pe(e)&&!!e.__locatorRef}function _e(e){return["input","textarea","select"].includes(e)}function Ve(e,t){return _e(e)&&"file"===t}function we(e){return!!e&&pe(e.validate)}function ke(e){return"checkbox"===e||"radio"===e}function Fe(e){return Number(e)>=0}function Se(e){return Array.isArray(e)?0===e.length:he(e)&&0===Object.keys(e).length}function je(e){return/^\[.+\]$/i.test(e)}function Ae(e){return je(e)?e.replace(/\[|\]/gi,""):e}function Oe(e,t){if(e)return je(t)?e[Ae(t)]:t.split(/\.|\[(\d+)\]/).filter(Boolean).reduce(((e,t)=>{if(e&&t in e)return e[t]}),e)}function Ue(e,t,a){if(je(t))return void(e[Ae(t)]=a);const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let r=e;for(let i=0;i<n.length;i++){if(i===n.length-1)return void(r[n[i]]=a);n[i]in r||(r[n[i]]=Fe(n[i+1])?[]:{}),r=r[n[i]]}}function Ee(e,t){Array.isArray(e)&&Fe(t)?e.splice(Number(t),1):delete e[t]}function De(e,t){if(je(t))return void delete e[Ae(t)];const a=t.split(/\.|\[(\d+)\]/).filter(Boolean);let n=e;for(let i=0;i<a.length;i++){if(i===a.length-1){Ee(n,a[i]);break}if(!(a[i]in n))break;n=n[a[i]]}const r=a.map(((t,n)=>Oe(e,a.slice(0,n).join("."))));for(let i=r.length-1;i>=0;i--)Se(r[i])&&(0!==i?Ee(r[i-1],a[i-1]):Ee(e,a[0]))}function Ce(e){return Object.keys(e)}function xe(e,t){const a=(0,n.FN)();return(0,n.f3)(e,(null===a||void 0===a?void 0:a.provides[e])||t)}const Me=e=>!!e&&(!!("undefined"!==typeof Event&&pe(Event)&&e instanceof Event)||!(!e||!e.srcElement));function Te(e){if(!Me(e))return e;const t=e.target;return ke(t.type)&&"_value"in t?t._value:"file"===t.type&&t.files?Array.from(t.files):t.value}function qe(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?pe(e)||we(e)||he(e)&&e._$$isNormalized?e:he(e)?Object.keys(e).reduce(((t,a)=>{const n=Le(e[a]);return!1!==e[a]&&(t[a]=Be(n)),t}),t):"string"!==typeof e?t:e.split("|").reduce(((e,t)=>{const a=Ie(t);return a.name?(e[a.name]=Be(a.params),e):e}),t):t}function Le(e){return!0===e?[]:Array.isArray(e)||he(e)?e:[e]}function Be(e){const t=e=>"string"===typeof e&&"@"===e[0]?Re(e.slice(1)):e;return Array.isArray(e)?e.map(t):Object.keys(e).reduce(((a,n)=>(a[n]=t(e[n]),a)),{})}const Ie=e=>{let t=[];const a=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:a,params:t}};function Re(e){const t=t=>{const a=t[e];return a};return t.__locatorRef=e,t}function Ze(e){return Array.isArray(e)?e.filter(be):Object.keys(e).filter((t=>be(e[t]))).map((t=>e[t]))}const He=(e,t)=>e.slots.default?e.slots.default(t):e.slots.default,Ne={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let $e=Object.assign({},Ne);const Pe=()=>$e;async function Ye(e,t,a={}){const n=null===a||void 0===a?void 0:a.bails,r={name:(null===a||void 0===a?void 0:a.name)||"{field}",rules:qe(t),bails:null===n||void 0===n||n,formData:(null===a||void 0===a?void 0:a.values)||{}},i=await We(r,e),o=i.errors;return{errors:o}}async function We(e,t){if(we(e.rules))return ze(e,t);if(pe(e.rules)){const a=await e.rules(t,{field:e.name,form:e.formData}),n="string"!==typeof a&&a,r="string"===typeof a?a:Xe({field:e.name,value:t,form:e.formData});return{errors:n?[]:[r]}}const a=[],n=Object.keys(e.rules),r=n.length;for(let i=0;i<r;i++){const r=n[i],o=await Je(e,t,{name:r,params:e.rules[r]});if(o.error&&(a.push(o.error),e.bails))return{errors:a}}return{errors:a}}async function ze(e,t){const a=await e.rules.validate(t,{abortEarly:e.bails}).then((()=>[])).catch((e=>{if("ValidationError"===e.name)return e.errors;throw e}));return{errors:a}}async function Je(e,t,a){const n=ge(a.name);if(!n)throw new Error(`No such validator '${a.name}' exists.`);const r=Ge(a.params,e.formData),i={field:e.name,value:t,form:e.formData,rule:a},o=await n(t,r,i);return"string"===typeof o?{error:o}:{error:o?void 0:Xe(i)}}function Xe(e){const t=Pe().generateMessage;return t?t(e):"Field is invalid"}function Ge(e,t){const a=e=>be(e)?e(t):e;return Array.isArray(e)?e.map(a):Object.keys(e).reduce(((t,n)=>(t[n]=a(e[n]),t)),{})}const Ke=Symbol("vee-validate-form"),Qe=Symbol("vee-validate-form-errors"),et=Symbol("vee-validate-form-initial-values");let tt=0;function at(e,t,a){const r=tt>=Number.MAX_SAFE_INTEGER?0:++tt,{initialValue:i,validateOnMount:o,bails:l,type:s,valueProp:u,label:c,validateOnValueUpdate:d}=nt((0,me.SU)(e),a),v=xe(Ke),{meta:f,errors:m,handleBlur:p,handleInput:h,resetValidationState:y,setValidationState:g,value:b,checked:_}=rt({name:e,initValue:(0,me.SU)(i),form:v,type:s,valueProp:u}),V=ot(null===v||void 0===v?void 0:v.schema,(0,me.SU)(e)),w=(0,n.Fl)((()=>qe(V||(0,me.SU)(t)))),k=async()=>{var t;let a;return f.pending=!0,a=v&&v.validateSchema?(await v.validateSchema())[(0,me.SU)(e)]:await Ye(b.value,w.value,{name:(0,me.SU)(c)||(0,me.SU)(e),values:null!==(t=null===v||void 0===v?void 0:v.values)&&void 0!==t?t:{},bails:l}),f.pending=!1,g(a)},F=e=>{var t,a;if(!_||_.value!==(null===(a=null===(t=e)||void 0===t?void 0:t.target)||void 0===a?void 0:a.checked))return b.value=Te(e),f.dirty=!0,d?void 0:k()};o&&(0,n.bv)(k);const S=(0,n.Fl)((()=>m.value[0]));function j(e){f.touched=e}function A(e){f.dirty=e}let O;function U(){d&&(O=(0,n.YP)(b,k,{deep:!0}))}function E(e){null===O||void 0===O||O(),y(e),U()}U();const D={fid:r,name:e,value:b,meta:f,errors:m,errorMessage:S,type:s,valueProp:u,checked:_,idx:-1,resetField:E,handleReset:()=>E(),validate:k,handleChange:F,handleBlur:p,handleInput:h,setValidationState:g,setTouched:j,setDirty:A};if((0,me.dq)(t)&&"function"!==typeof(0,me.SU)(t)&&(0,n.YP)(t,k,{deep:!0}),!v)return D;v.register(D),(0,n.Jd)((()=>{v.unregister(D)}));const C=(0,n.Fl)((()=>{const e=w.value;return!e||pe(e)||pe(e.validate)?[]:Object.keys(e).reduce(((e,t)=>{const a=Ze(w.value[t]).map((e=>e.__locatorRef));return e.push(...a),e}),[])}));return(0,n.m0)((()=>{C.value.length&&C.value.forEach((e=>{if(e in v.values&&f.dirty)return k()}))})),D}function nt(e,t){const a=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,rules:"",label:e,validateOnValueUpdate:!0});return t?Object.assign(Object.assign({},a()),t||{}):a()}function rt({name:e,initValue:t,form:a,type:r,valueProp:i}){var o;const l=(0,me.iH)([]),s=xe(et,void 0),u=null!==(o=Oe((0,me.SU)(s),(0,me.SU)(e)))&&void 0!==o?o:t,{resetMeta:c,meta:d}=it(u),v=lt(u,e,a);ke(r)&&u&&(v.value=u);const f=ke(r)?(0,n.Fl)((()=>Array.isArray(v.value)?v.value.includes((0,me.SU)(i)):(0,me.SU)(i)===v.value)):void 0;(void 0===f||f.value)&&(v.value=u);const m=()=>{d.touched=!0},p=e=>{ke(r)||(v.value=Te(e)),d.dirty=!0};function h(e){return l.value=e.errors,d.valid=!e.errors.length,e}function y(a){var n;v.value=a&&"value"in a?a.value:null!==(n=Oe((0,me.SU)(s),(0,me.SU)(e)))&&void 0!==n?n:t,l.value=(null===a||void 0===a?void 0:a.errors)||[],c(a)}return{meta:d,errors:l,setValidationState:h,resetValidationState:y,handleBlur:m,handleInput:p,value:v,checked:f}}function it(e){const t=()=>({touched:!1,dirty:!1,valid:!1,pending:!1,initialValue:e}),a=(0,me.qj)(t());function n(e){var n,r,i;const o=t();a.pending=o.pending,a.touched=null!==(n=null===e||void 0===e?void 0:e.touched)&&void 0!==n?n:o.touched,a.dirty=null!==(r=null===e||void 0===e?void 0:e.dirty)&&void 0!==r?r:o.dirty,a.initialValue=null!==(i=null===e||void 0===e?void 0:e.value)&&void 0!==i?i:o.initialValue}return{meta:a,resetMeta:n}}function ot(e,t){if(e)return e[t]}function lt(e,t,a){if(!a)return(0,me.iH)(e);Ue(a.values,(0,me.SU)(t),e);const r=(0,n.Fl)({get(){return Oe(a.values,(0,me.SU)(t))},set(e){a.setFieldValue((0,me.SU)(t),e)}});return r}const st=(0,n.aZ)({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:null},validateOnMount:{type:Boolean,default:!1},bails:{type:Boolean,default:()=>Pe().bails},label:{type:String,default:void 0}},setup(e,t){const a=(0,me.Vh)(e,"rules"),r=(0,me.Vh)(e,"name"),i=(0,me.Vh)(e,"label"),{errors:o,value:l,errorMessage:s,validate:u,handleChange:c,handleBlur:d,handleInput:v,setDirty:f,setTouched:m,resetField:p,handleReset:h,meta:y,checked:g}=at(r,a,{validateOnMount:e.validateOnMount,bails:e.bails,type:t.attrs.type,initialValue:ke(t.attrs.type)||"modelValue"in t.attrs?t.attrs.modelValue:t.attrs.value,valueProp:t.attrs.value,label:i,validateOnValueUpdate:!1});let b=!1;function _(){b=!0,(0,n.Y3)((()=>{b=!1}))}const V="modelValue"in t.attrs?function(e){c(e),t.emit("update:modelValue",l.value)}:c,w="modelValue"in t.attrs?function(e){v(e),t.emit("update:modelValue",l.value)}:v,{validateOnInput:k,validateOnChange:F,validateOnBlur:S,validateOnModelUpdate:j}=Pe(),A=[d,t.attrs.onBlur,S?u:void 0].filter(Boolean),O=[w,_,k?V:void 0,t.attrs.onInput].filter(Boolean),U=[w,_,F?V:void 0,t.attrs.onChange].filter(Boolean),E=()=>{const a={name:e.name,onBlur:A,onInput:O,onChange:U};return j&&(a["onUpdate:modelValue"]=[V,_]),ke(t.attrs.type)&&g?a.checked=g.value:a.value=l.value,Ve(ut(e,t),t.attrs.type)&&delete a.value,{field:a,meta:y,errors:o.value,errorMessage:s.value,validate:u,resetField:p,handleChange:V,handleInput:w,handleReset:h,handleBlur:d,setDirty:f,setTouched:m}};return()=>{const a=(0,n.LL)(ut(e,t)),r=E();"modelValue"in t.attrs&&String(t.attrs.modelValue)!==String(l.value)&&!b&&(0,n.Y3)((()=>{c(t.attrs.modelValue)}));const i=He(t,r);return a?(0,n.h)(a,Object.assign(Object.assign({},t.attrs),r.field),i):i}}});function ut(e,t){let a=e.as||"";return e.as||t.slots.default||(a="input"),a}function ct(e){const t=(0,me.iH)([]),a=(0,me.iH)(!1),r=(0,n.Fl)((()=>t.value.reduce(((e,t)=>{if(!e[t.name])return e[t.name]=t,t.idx=-1,e;if(!Array.isArray(e[t.name])){const a=e[t.name];a.idx=0,e[t.name]=[a]}return t.idx=e[t.name].length,e[t.name].push(t),e}),{}))),i=(0,me.qj)({}),o={},l=(0,n.Fl)((()=>t.value.reduce(((e,t)=>{let a;if(Array.isArray(r.value[t.name])){const e=r.value[t.name];a=(0,me.SU)((e.find((e=>(0,me.SU)(e.checked)))||t).errorMessage)}else a=(0,me.SU)(t.errorMessage);return a&&(e[t.name]=a),e}),{}))),{initialValues:s,setInitialValues:u}=ft(r,i,null===e||void 0===e?void 0:e.initialValues),c=dt(t,s);function d(e,t){const a=r.value[e];a&&(Array.isArray(a)?a.forEach((e=>{e.setValidationState({errors:t?[t]:[]})})):a.setValidationState({errors:t?[t]:[]}))}function v(e){Ce(e).forEach((t=>{d(t,e[t])}))}function f(e,t){var a;const n=r.value[e];if(Array.isArray(n)&&"checkbox"===(null===(a=n[0])||void 0===a?void 0:a.type)&&!Array.isArray(t)){const a=Oe(i,e),r=Array.isArray(a)?[...a]:[],l=r.indexOf(t);return l>=0?r.splice(l,1):r.push(t),Ue(i,e,r),void n.forEach((e=>{o[e.fid]=r}))}let l=t;"checkbox"===(null===n||void 0===n?void 0:n.type)&&(l=Oe(i,e)===t?void 0:t),Ue(i,e,l),n&&(o[n.fid]=l)}function m(e){Ce(e).forEach((t=>{f(t,e[t])}))}function p(e,t){const a=r.value[e];a&&(Array.isArray(a)?a.forEach((e=>e.setTouched(t))):a.setTouched(t))}function h(e){Ce(e).forEach((t=>{p(t,!!e[t])}))}function y(e,t){const a=r.value[e];a&&(Array.isArray(a)?a.forEach((e=>e.setDirty(t))):a.setDirty(t))}function g(e){Ce(e).forEach((t=>{y(t,!!e[t])}))}const b=e=>{(null===e||void 0===e?void 0:e.values)&&u(e.values),t.value.forEach((e=>e.resetField())),(null===e||void 0===e?void 0:e.dirty)&&g(e.dirty),(null===e||void 0===e?void 0:e.touched)&&h(e.touched),(null===e||void 0===e?void 0:e.errors)&&v(e.errors)};function _(e){t.value.push(e),(0,me.dq)(e.name)&&(0,n.YP)(e.name,(t=>{f(t,o[e.fid])}),{flush:"post"})}function V(e){var a,r;const l=t.value.indexOf(e);if(-1===l)return;t.value.splice(l,1);const s=e.fid;(0,n.Y3)((()=>{delete o[s]}));const u=(0,me.SU)(e.name);if(-1===e.idx)return void De(i,u);const c=null===(r=null===(a=Oe(i,u))||void 0===a?void 0:a.indexOf)||void 0===r?void 0:r.call(a,(0,me.SU)(e.valueProp));void 0!==c?-1!==c&&(Array.isArray(i[u])?De(i,`${u}.${c}`):De(i,u)):De(i,u)}const w={register:_,unregister:V,fields:r,values:i,schema:null===e||void 0===e?void 0:e.validationSchema,validateSchema:we(null===e||void 0===e?void 0:e.validationSchema)?(e=!1)=>vt(w,e):void 0,setFieldValue:f,setValues:m,setErrors:v,setFieldError:d,setFieldTouched:p,setTouched:h,setFieldDirty:y,setDirty:g,resetForm:b},k=async()=>{if(w.validateSchema)return w.validateSchema(!0).then((e=>Object.keys(e).every((t=>!e[t].errors.length))));const e=await Promise.all(t.value.map((e=>e.validate())));return e.every((e=>!e.errors.length))},F=(0,n.Fl)((()=>t.value.reduce(((e,t)=>(Ue(e,t.name,(0,me.SU)(t.value)),e)),{}))),S=e=>function(t){return t instanceof Event&&(t.preventDefault(),t.stopPropagation()),a.value=!0,k().then((a=>{if(a&&"function"===typeof e)return e(F.value,{evt:t,setDirty:g,setFieldDirty:y,setErrors:v,setFieldError:d,setTouched:h,setFieldTouched:p,setValues:m,setFieldValue:f,resetForm:b})})).then((()=>{a.value=!1}),(e=>{throw a.value=!1,e}))},j=S(((e,{evt:t})=>{var a;t&&(null===(a=null===t||void 0===t?void 0:t.target)||void 0===a||a.submit())}));return(0,n.bv)((()=>{(null===e||void 0===e?void 0:e.initialErrors)&&v(e.initialErrors),(null===e||void 0===e?void 0:e.initialDirty)&&g(e.initialDirty),(null===e||void 0===e?void 0:e.initialTouched)&&h(e.initialTouched),(null===e||void 0===e?void 0:e.validateOnMount)&&k()})),(0,n.JJ)(Ke,w),(0,n.JJ)(Qe,l),{errors:l,meta:c,values:i,validate:k,isSubmitting:a,handleReset:()=>b(),resetForm:b,handleSubmit:S,submitForm:j,setFieldError:d,setErrors:v,setFieldValue:f,setValues:m,setFieldTouched:p,setTouched:h,setFieldDirty:y,setDirty:g}}function dt(e,t){const a={valid:"every",dirty:"some",touched:"some",pending:"some"};return(0,n.Fl)((()=>{const n=Ce(a).reduce(((t,n)=>{const r=a[n];return t[n]=e.value[r]((e=>e.meta[n])),t}),{});return Object.assign({initialValues:(0,me.SU)(t)},n)}))}async function vt(e,t=!1){const a=await e.schema.validate(e.values,{abortEarly:!1}).then((()=>[])).catch((e=>{if("ValidationError"!==e.name)throw e;return e.inner||[]})),n=e.fields.value,r=a.reduce(((e,t)=>(e[t.path]=t,e)),{}),i=Ce(n).reduce(((e,a)=>{const i=n[a],o=(r[a]||{errors:[]}).errors,l={errors:o};e[a]=l;const s=Array.isArray(i),u=s?i.some((e=>e.meta.dirty)):i.meta.dirty;return t||u?s?(i.forEach((e=>e.setValidationState(l))),e):(i.setValidationState(l),e):e}),{});return i}function ft(e,t,a){const r=(0,me.iH)((0,me.SU)(a)||{}),i=(0,n.Fl)((()=>r.value));function o(a,n=!1){if(r.value=Object.assign(Object.assign({},r.value),a),!n)return;const i=e=>e.meta.dirty||e.meta.touched;Ce(e.value).forEach((a=>{const n=e.value[a],o=Array.isArray(n)?n.some(i):i(n);if(o)return;const l=Oe(r.value,a);Ue(t,a,l)}))}return(0,me.dq)(a)&&(0,n.YP)(a,(e=>{o(e,!0)}),{deep:!0}),(0,n.JJ)(et,i),{initialValues:i,setInitialValues:o}}const mt=(0,n.aZ)({name:"Form",inheritAttrs:!1,props:{as:{type:String,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialDirty:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1}},setup(e,t){const a=(0,me.Vh)(e,"initialValues"),{errors:r,validate:i,handleReset:o,resetForm:l,values:s,meta:u,isSubmitting:c,handleSubmit:d,submitForm:v,setErrors:f,setFieldError:m,setFieldValue:p,setValues:h,setFieldDirty:y,setDirty:g,setFieldTouched:b,setTouched:_}=ct({validationSchema:e.validationSchema,initialValues:a,initialErrors:e.initialErrors,initialTouched:e.initialTouched,initialDirty:e.initialDirty,validateOnMount:e.validateOnMount}),V=t.attrs.onSubmit?d(t.attrs.onSubmit):v;function w(){o(),"function"===typeof t.attrs.onReset&&t.attrs.onReset()}function k(e,t){const a="function"!==typeof e||t?t:e;return d(a)(e)}return function(){"setErrors"in this||(this.setFieldError=m,this.setErrors=f,this.setFieldValue=p,this.setValues=h,this.setFieldDirty=y,this.setDirty=g,this.setFieldTouched=b,this.setTouched=_,this.resetForm=l,this.validate=i);const a=He(t,{meta:u.value,errors:r.value,values:s,isSubmitting:c.value,validate:i,handleSubmit:k,handleReset:o,submitForm:v,setErrors:f,setFieldError:m,setFieldValue:p,setValues:h,setFieldDirty:y,setDirty:g,setFieldTouched:b,setTouched:_,resetForm:l});if(!e.as)return a;const d="form"===e.as?{novalidate:!0}:{};return(0,n.h)("form"===e.as?e.as:(0,n.LL)(e.as),Object.assign(Object.assign(Object.assign({},d),t.attrs),{onSubmit:V,onReset:w}),a)}}});(0,n.aZ)({props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(e,t){const a=(0,n.f3)(Qe,void 0),r=(0,n.Fl)((()=>null===a||void 0===a?void 0:a.value[e.name]));return()=>{const a=He(t,{message:r.value}),i=e.as?(0,n.LL)(e.as):e.as,o=Object.assign({role:"alert"},t.attrs);return!i&&(null===a||void 0===a?void 0:a.length)?a:(null===a||void 0===a?void 0:a.length)?(0,n.h)(i,o,a):(0,n.h)(i||"span",o,r.value)}}});var pt={account(e){return e?!!/^[a-zA-Z]\w{5,19}$/.test(e)||"字母开头且6-20个字符":"请输入用户名"},password(e){return e?!!/^\w{6,24}$/.test(e)||"密码是6-24个字符":"请输入密码"},mobile(e){return e?!!/^1[3-9]\d{9}$/.test(e)||"手机号格式错误":"请输入手机号"},code(e){return e?!!/^\d{6}$/.test(e)||"验证码是6个数字":"请输入验证码"},isAgree(e){return!!e||"请勾选同意用户协议"}},ht=a(8391),yt=a(4471);const gt=({account:e,password:t})=>(0,yt.Z)("/login","post",{account:e,password:t}),bt=({mobile:e,code:t})=>(0,yt.Z)("/login/code","post",{mobile:e,code:t}),_t=e=>(0,yt.Z)("/login/code","get",{mobile:e});var Vt=a(65),wt=a(2483),kt=a(3430),Ft={name:"LoginForm",components:{Form:mt,Field:st},setup(){const e=(0,me.iH)(!1),t=(0,me.qj)({isAgree:!0,account:null,password:null,mobile:null,code:null}),a={account:pt.account,password:pt.password,mobile:pt.mobile,code:pt.code,isAgree:pt.isAgree},r=(0,me.iH)(null);(0,n.YP)(e,(()=>{t.isAgree=!0,t.account=null,t.password=null,t.mobile=null,t.code=null,r.value.resetForm()}));const i=(0,Vt.oR)(),o=(0,wt.tv)(),l=(0,wt.yj)(),s=async()=>{const a=await r.value.validate();if(a)try{let a=null;if(e.value){const{mobile:e,code:n}=t;a=await bt({mobile:e,code:n})}else{const{account:e,password:n}=t;a=await gt({account:e,password:n})}const{id:n,account:r,avatar:s,mobile:u,nickname:c,token:d}=a.result;i.commit("user/setUser",{id:n,account:r,avatar:s,mobile:u,nickname:c,token:d}),i.dispatch("cart/mergeLocalCart").then((()=>{o.push(l.query.redirectUrl||"/"),(0,ht.Z)({type:"success",text:"登录成功"})}))}catch(n){n.response.data&&(0,ht.Z)({type:"error",text:n.response.data.message||"登录失败"})}},u=(0,me.iH)(0),{pause:c,resume:d}=(0,kt.Zv)((()=>{u.value--,u.value<=0&&c()}),1e3,!1);(0,n.Ah)((()=>{c()}));const v=async()=>{const e=a.mobile(t.mobile);!0===e?0===u.value&&(await _t(t.mobile),(0,ht.Z)({type:"success",text:"发送成功"}),u.value=60,d()):r.value.setFieldError("mobile",e)};return{isMsgLogin:e,form:t,scheam:a,formCom:r,login:s,send:v,time:u}}};const St=(0,k.Z)(Ft,[["render",fe],["__scopeId","data-v-371ea89e"]]);var jt=St,At={name:"Login",components:{LoginHeader:S,LoginFooter:C,LoginForm:jt},setup(){const e=(0,me.iH)("account");return{activeName:e}}};const Ot=(0,k.Z)(At,[["render",f],["__scopeId","data-v-7a586a6e"]]);var Ut=Ot},3947:function(e,t,a){e.exports=a.p+"img/qrcode.f8ff6896.jpg"}}]);
//# sourceMappingURL=261.bafce54e.js.map