"use strict";(self["webpackChunkerabbit_pc_project"]=self["webpackChunkerabbit_pc_project"]||[]).push([[941],{7535:function(e,s,t){t.d(s,{LV:function(){return a},Yb:function(){return i},a_:function(){return o},pm:function(){return n},y$:function(){return d}});var l=t(4471);const a=()=>(0,l.Z)("/member/order/pre","get"),d=e=>(0,l.Z)("/member/address","post",e),i=e=>(0,l.Z)(`/member/address${e.id}`,"put",e),n=e=>(0,l.Z)("/member/order","post",e),o=e=>(0,l.Z)("/member/order/"+e,"get")},8391:function(e,s,t){var l=t(3396),a=t(9242),d=t(5435);const i=document.createElement("div");i.setAttribute("class","xtx-message-container"),document.body.appendChild(i);let n=null;s["Z"]=({type:e,text:s})=>{const t=(0,l.Wm)(d["default"],{type:e,text:s});(0,a.sY)(t,i),clearTimeout(n),n=setTimeout((()=>{(0,a.sY)(null,i)}),3e3)}},4941:function(e,s,t){t.r(s),t.d(s,{default:function(){return ke}});var l=t(3396),a=t(7139);const d=e=>((0,l.dD)("data-v-5030e62d"),e=e(),(0,l.Cn)(),e),i={class:"xtx-pay-checkout-page"},n={class:"container"},o={key:0,class:"wrapper"},r=d((()=>(0,l._)("h3",{class:"box-title"},"商品信息",-1))),c={class:"box-body"},u={class:"goods"},p=d((()=>(0,l._)("thead",null,[(0,l._)("tr",null,[(0,l._)("th",{width:"520"},"商品信息"),(0,l._)("th",{width:"170"},"单价"),(0,l._)("th",{width:"170"},"数量"),(0,l._)("th",{width:"170"},"小计"),(0,l._)("th",{width:"170"},"实付")])],-1))),m={href:"javascript:;",class:"info"},_=["src"],v={class:"right"},f=(0,l.uE)('<h3 class="box-title" data-v-5030e62d>配送时间</h3><div class="box-body" data-v-5030e62d><a class="my-btn active" href="javascript:;" data-v-5030e62d>不限送货时间：周一至周日</a><a class="my-btn" href="javascript:;" data-v-5030e62d>工作日送货：周一至周五</a><a class="my-btn" href="javascript:;" data-v-5030e62d>双休日、假日送货：周六至周日</a></div><h3 class="box-title" data-v-5030e62d>支付方式</h3><div class="box-body" data-v-5030e62d><a class="my-btn active" href="javascript:;" data-v-5030e62d>在线支付</a><a class="my-btn" href="javascript:;" data-v-5030e62d>货到付款</a><span style="color:#999;" data-v-5030e62d>货到付款需付5元手续费</span></div><h3 class="box-title" data-v-5030e62d>金额明细</h3>',5),h={class:"box-body"},y={class:"total"},w=d((()=>(0,l._)("dt",null,"商品件数：",-1))),b=d((()=>(0,l._)("dt",null,"商品总价：",-1))),g=d((()=>(0,l._)("dt",null,[(0,l.Uk)("运"),(0,l._)("i"),(0,l.Uk)("费：")],-1))),k=d((()=>(0,l._)("dt",null,"应付总额：",-1))),x={class:"price"},C={class:"submit"};function D(e,s,t,d,D,U){const A=(0,l.up)("XtxBreadItem"),z=(0,l.up)("XtxBread"),W=(0,l.up)("CheckoutAddress"),V=(0,l.up)("XtxButton");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("div",n,[(0,l.Wm)(z,null,{default:(0,l.w5)((()=>[(0,l.Wm)(A,{to:"/"},{default:(0,l.w5)((()=>[(0,l.Uk)("首页")])),_:1}),(0,l.Wm)(A,{to:"/cart"},{default:(0,l.w5)((()=>[(0,l.Uk)("购物车")])),_:1}),(0,l.Wm)(A,null,{default:(0,l.w5)((()=>[(0,l.Uk)("填写订单")])),_:1})])),_:1}),d.order?((0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(W,{onChange:d.changeAddresss,list:d.order.userAddresses},null,8,["onChange","list"]),r,(0,l._)("div",c,[(0,l._)("table",u,[p,(0,l._)("tbody",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(d.order.goods,(e=>((0,l.wg)(),(0,l.iD)("tr",{key:e.skuId},[(0,l._)("td",null,[(0,l._)("a",m,[(0,l._)("img",{src:e.picture,alt:""},null,8,_),(0,l._)("div",v,[(0,l._)("p",null,(0,a.zw)(e.name),1),(0,l._)("p",null,(0,a.zw)(e.attrsText),1)])])]),(0,l._)("td",null,"¥"+(0,a.zw)(e.payPrice),1),(0,l._)("td",null,(0,a.zw)(e.count),1),(0,l._)("td",null,"¥"+(0,a.zw)(e.totalPrice),1),(0,l._)("td",null,"¥"+(0,a.zw)(e.totalPayPrice),1)])))),128))])])]),f,(0,l._)("div",h,[(0,l._)("div",y,[(0,l._)("dl",null,[w,(0,l._)("dd",null,(0,a.zw)(d.order.summary.goodsCount)+"件",1)]),(0,l._)("dl",null,[b,(0,l._)("dd",null,"¥"+(0,a.zw)(d.order.summary.totalPayPrice),1)]),(0,l._)("dl",null,[g,(0,l._)("dd",null,"¥"+(0,a.zw)(d.order.summary.postFee),1)]),(0,l._)("dl",null,[k,(0,l._)("dd",x,"¥"+(0,a.zw)(d.order.summary.totalPayPrice),1)])])]),(0,l._)("div",C,[(0,l.Wm)(V,{onClick:d.submitOrderFn,type:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("提交订单")])),_:1},8,["onClick"])])])):(0,l.kq)("",!0)])])}t(7658);const U=e=>((0,l.dD)("data-v-345e4f53"),e=e(),(0,l.Cn)(),e),A={class:"checkout-address"},z={class:"text"},W={key:0,class:"none"},V={key:1},j=U((()=>(0,l._)("span",null,[(0,l.Uk)("收"),(0,l._)("i"),(0,l.Uk)("货"),(0,l._)("i"),(0,l.Uk)("人：")],-1))),H=U((()=>(0,l._)("span",null,"联系方式：",-1))),I=U((()=>(0,l._)("span",null,"收货地址：",-1))),P={class:"action"},Z=["onClick"],E=U((()=>(0,l._)("span",null,[(0,l.Uk)("收"),(0,l._)("i"),(0,l.Uk)("货"),(0,l._)("i"),(0,l.Uk)("人：")],-1))),L=U((()=>(0,l._)("span",null,"联系方式：",-1))),$=U((()=>(0,l._)("span",null,"收货地址：",-1)));function T(e,s,t,d,i,n){const o=(0,l.up)("XtxButton"),r=(0,l.up)("XtxDialog"),c=(0,l.up)("AddressEdit");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",A,[(0,l._)("div",z,[d.showAddress?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",W,"您需要先添加收货地址才可提交订单。")),d.showAddress?((0,l.wg)(),(0,l.iD)("ul",V,[(0,l._)("li",null,[j,(0,l.Uk)((0,a.zw)(d.showAddress.receiver),1)]),(0,l._)("li",null,[H,(0,l.Uk)((0,a.zw)(d.showAddress.contact.replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2")),1)]),(0,l._)("li",null,[I,(0,l.Uk)((0,a.zw)(d.showAddress.fullLocation.replace(/ /g,"")+d.showAddress.address),1)])])):(0,l.kq)("",!0),d.showAddress?((0,l.wg)(),(0,l.iD)("a",{key:2,onClick:s[0]||(s[0]=e=>d.openAddressEdit(d.showAddress)),href:"javascript:;"},"修改地址")):(0,l.kq)("",!0)]),(0,l._)("div",P,[(0,l.Wm)(o,{onClick:s[1]||(s[1]=e=>d.openDialog()),class:"btn"},{default:(0,l.w5)((()=>[(0,l.Uk)("切换地址")])),_:1}),(0,l.Wm)(o,{onClick:s[2]||(s[2]=e=>d.openAddressEdit({})),class:"btn"},{default:(0,l.w5)((()=>[(0,l.Uk)("添加地址")])),_:1})])]),(0,l.Wm)(r,{title:"切换收货地址",visible:d.dialogVisible,"onUpdate:visible":s[4]||(s[4]=e=>d.dialogVisible=e)},{footer:(0,l.w5)((()=>[(0,l.Wm)(o,{onClick:s[3]||(s[3]=e=>d.dialogVisible=!1),type:"gray",style:{"margin-right":"20px"}},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1}),(0,l.Wm)(o,{onClick:d.confirmAddressFn,type:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("确认")])),_:1},8,["onClick"])])),default:(0,l.w5)((()=>[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.list,(e=>((0,l.wg)(),(0,l.iD)("div",{onClick:s=>d.selectedAddress=e,class:(0,a.C_)([{active:d.selectedAddress&&d.selectedAddress.id===e.id},"text item"]),key:e.id},[(0,l._)("ul",null,[(0,l._)("li",null,[E,(0,l.Uk)((0,a.zw)(e.receiver),1)]),(0,l._)("li",null,[L,(0,l.Uk)((0,a.zw)(e.contact.replace(/^(\d{3})\d{4}(\d{4})$/,"$1****$2")),1)]),(0,l._)("li",null,[$,(0,l.Uk)((0,a.zw)(e.fullLocation.replace(/ /g,"")+e.address),1)])])],10,Z)))),128))])),_:1},8,["visible"]),(0,l.Wm)(c,{ref:"addressEdit",onOnSuccess:d.successHandler},null,8,["onOnSuccess"])],64)}t(541);var X=t(4870),q=t(9242);const Y=e=>((0,l.dD)("data-v-ac234796"),e=e(),(0,l.Cn)(),e),O={class:"address-edit"},B={class:"xtx-form"},F={class:"xtx-form-item"},S=Y((()=>(0,l._)("div",{class:"label"},"收货人：",-1))),M={class:"field"},J={class:"xtx-form-item"},K=Y((()=>(0,l._)("div",{class:"label"},"手机号：",-1))),N={class:"field"},G={class:"xtx-form-item"},Q=Y((()=>(0,l._)("div",{class:"label"},"地区：",-1))),R={class:"field"},ee={class:"xtx-form-item"},se=Y((()=>(0,l._)("div",{class:"label"},"详细地址：",-1))),te={class:"field"},le={class:"xtx-form-item"},ae=Y((()=>(0,l._)("div",{class:"label"},"邮政编码：",-1))),de={class:"field"},ie={class:"xtx-form-item"},ne=Y((()=>(0,l._)("div",{class:"label"},"地址标签：",-1))),oe={class:"field"};function re(e,s,t,a,d,i){const n=(0,l.up)("XtxCity"),o=(0,l.up)("XtxButton"),r=(0,l.up)("XtxDialog");return(0,l.wg)(),(0,l.j4)(r,{title:(a.formData.id?"编辑":"添加")+"收货地址",visible:a.dialogVisible,"onUpdate:visible":s[7]||(s[7]=e=>a.dialogVisible=e)},{footer:(0,l.w5)((()=>[(0,l.Wm)(o,{onClick:s[5]||(s[5]=e=>a.dialogVisible=!1),type:"gray",style:{"margin-right":"20px"}},{default:(0,l.w5)((()=>[(0,l.Uk)("取消")])),_:1}),(0,l.Wm)(o,{onClick:s[6]||(s[6]=e=>a.submit()),type:"primary"},{default:(0,l.w5)((()=>[(0,l.Uk)("确认")])),_:1})])),default:(0,l.w5)((()=>[(0,l._)("div",O,[(0,l._)("div",B,[(0,l._)("div",F,[S,(0,l._)("div",M,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":s[0]||(s[0]=e=>a.formData.receiver=e),class:"input",placeholder:"请输入收货人"},null,512),[[q.nr,a.formData.receiver]])])]),(0,l._)("div",J,[K,(0,l._)("div",N,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>a.formData.contact=e),class:"input",placeholder:"请输入手机号"},null,512),[[q.nr,a.formData.contact]])])]),(0,l._)("div",G,[Q,(0,l._)("div",R,[(0,l.Wm)(n,{placeholder:"请选择所在地区",fullLocation:a.formData.fullLocation,onChange:a.changeCty},null,8,["fullLocation","onChange"])])]),(0,l._)("div",ee,[se,(0,l._)("div",te,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":s[2]||(s[2]=e=>a.formData.address=e),class:"input",placeholder:"请输入详细地址"},null,512),[[q.nr,a.formData.address]])])]),(0,l._)("div",le,[ae,(0,l._)("div",de,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":s[3]||(s[3]=e=>a.formData.postalCode=e),class:"input",placeholder:"请输入邮政编码"},null,512),[[q.nr,a.formData.postalCode]])])]),(0,l._)("div",ie,[ne,(0,l._)("div",oe,[(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>a.formData.addressTags=e),class:"input",placeholder:"请输入地址标签，逗号分隔"},null,512),[[q.nr,a.formData.addressTags]])])])])])])),_:1},8,["title","visible"])}var ce=t(7535),ue={name:"AddressEdit",setup(){const e=(0,X.iH)(!1),s=s=>{if(e.value=!0,s.id)for(const e in t)t[e]=s[e];else for(const e in t)t[e]="isDefault"===e?1:null},t=(0,X.qj)({receiver:"",contact:"",provinceCode:"",cityCode:"",countyCode:"",id:"",address:"",postalCode:"",addressTags:"",isDefault:0,fullLocation:""}),l=e=>{t.provinceCode=e.provinceCode,t.cityCode=e.cityCode,t.countyCode=e.countyCode,t.fullLocation=e.fullLocation},a=()=>{t.id?(0,ce.Yb)(t).then((s=>{Message({text:"修改收货地址成功",type:"success"}),e.value=!1,emit("on-success",t)})):(0,ce.y$)(t).then((s=>{Message({text:"添加收货地址成功",type:"success"}),t.id=s.result.id,e.value=!1,emit("on-success",t)}))};return{dialogVisible:e,open:s,formData:t,changeCty:l,submit:a}}},pe=t(89);const me=(0,pe.Z)(ue,[["render",re],["__scopeId","data-v-ac234796"]]);var _e=me,ve={name:"CheckoutAddress",components:{AddressEdit:_e},props:{list:{type:Array,default:()=>[]}},emits:["change"],setup(e,{emit:s}){const t=(0,X.iH)(null),l=e.list.find((e=>"张三"===e.receiver));l?t.value=l:e.list.length&&(t.value=e.list[0]),s("change",t.value&&t.value.id);const a=(0,X.iH)(!1),d=(0,X.iH)(null),i=()=>{t.value=d.value,s("change",d.value.id),a.value=!1},n=()=>{d.value=null,a.value=!0},o=(0,X.iH)(null),r=e=>{o.value.open(e)},c=s=>{const t=e.list.find((e=>e.id===s.id));if(t)for(const[e]in t)t[e],s[e];const l=JSON.stringify(s);e.list.unshift(JSON.parse(l))};return{showAddress:t,dialogVisible:a,selectedAddress:d,confirmAddressFn:i,openDialog:n,addressEdit:o,openAddressEdit:r,successHandler:c}}};const fe=(0,pe.Z)(ve,[["render",T],["__scopeId","data-v-345e4f53"]]);var he=fe,ye=t(8391),we=t(2483),be={name:"XtxPayCheckoutPage",components:{CheckoutAddress:he},setup(){const e=(0,X.iH)(null);(0,ce.LV)().then((s=>{e.value=s.result,t.goods=s.result.goods.map((({skuId:e,count:s})=>({skuId:e,count:s})))}));const s=e=>{t.addressId=e},t=(0,X.qj)({addressId:null,deliveryTimeType:1,payType:1,payChannel:1,buyerMessage:"",goods:[]}),l=(0,we.tv)(),a=()=>{if(!t.addressId)return(0,ye.Z)({text:"请选择收货地址"});(0,ce.pm)(t).then((e=>{(0,ye.Z)({type:"success",text:"提交成功"}),l.push(`/member/pay?orderId=${e.result.id}`)}))};return{order:e,changeAddresss:s,reqParams:t,submitOrderFn:a}}};const ge=(0,pe.Z)(be,[["render",D],["__scopeId","data-v-5030e62d"]]);var ke=ge}}]);
//# sourceMappingURL=941.60a5d6f8.js.map