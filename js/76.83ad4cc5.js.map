{"version":3,"file":"js/76.83ad4cc5.js","mappings":"6MAGOA,MAAM,iB,GACNA,MAAM,iB,GACNA,MAAM,S,yEAJXC,EAAAA,EAAAA,IAKaC,EAAA,CALAC,GAAE,YAAcC,EAAAA,MAAMC,KAAML,MAAM,cAA/C,C,kBACE,IAAiC,EAAjCM,EAAAA,EAAAA,GAAiC,OAA3BC,IAAKH,EAAAA,MAAMI,QAASC,IAAI,IAA9B,WACAH,EAAAA,EAAAA,GAA6C,IAA7C,GAA6CI,EAAAA,EAAAA,IAAjBN,EAAAA,MAAMO,MAAI,IACtCL,EAAAA,EAAAA,GAA6C,IAA7C,GAA6CI,EAAAA,EAAAA,IAAjBN,EAAAA,MAAMQ,MAAI,IACtCN,EAAAA,EAAAA,GAA2C,IAA3C,EAAiB,KAAKI,EAAAA,EAAAA,IAAGN,EAAAA,MAAMS,OAAK,M,KAJtC,S,CASF,OACEF,KAAM,YACNG,MAAO,CACLC,MAAO,CACLC,KAAKC,OACLC,QAAQ,U,QCRd,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O,2FCROpB,MAAM,gB,GACJA,MAAM,a,GAMJA,MAAM,c,8KAPfqB,EAAAA,EAAAA,IAoBM,MApBN,EAoBM,EAnBJf,EAAAA,EAAAA,GAkBM,MAlBN,EAkBM,EAhBJgB,EAAAA,EAAAA,IAAYC,IAEZD,EAAAA,EAAAA,IAA2CE,EAAA,CAA/BC,eAAeC,EAAAA,cAAY,4BAEvCpB,EAAAA,EAAAA,GAWM,MAXN,EAWM,EATJgB,EAAAA,EAAAA,IAAqCK,EAAA,CAA3BC,aAAaF,EAAAA,YAAU,0BAEjCpB,EAAAA,EAAAA,GAIK,0BAHHe,EAAAA,EAAAA,IAEKQ,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAFeJ,EAAAA,WAATX,K,WAAXM,EAAAA,EAAAA,IAEK,MAF2BU,IAAKhB,EAAMiB,GAA3C,EACEV,EAAAA,EAAAA,IAA4BW,EAAA,CAAhBlB,MAAOA,GAAK,uBAD1B,SAKFO,EAAAA,EAAAA,IAAoFY,EAAA,CAA/DC,QAAST,EAAAA,QAAUU,SAAUV,EAAAA,SAAaW,WAAUX,EAAAA,SAAzE,iD,mICjBNzB,EAAAA,EAAAA,IAMWqC,EAAA,M,kBALT,IAAsC,EAAtChB,EAAAA,EAAAA,IAAsCiB,EAAA,CAAxBpC,GAAG,KAAG,C,kBAAC,IAAE,UAAF,S,MACDuB,EAAAA,SAASc,MAAAA,EAAAA,EAAAA,OAA7BvC,EAAAA,EAAAA,IAA2GsC,EAAA,C,MAAxEpC,GAAE,aAAeuB,EAAAA,SAASc,IAAInC,MAAjE,C,kBAAuE,IAAqB,mBAAnBqB,EAAAA,SAASc,IAAI7B,MAAI,M,KAA1F,4BACAW,EAAAA,EAAAA,IAEamB,EAAAA,GAAA,CAFD9B,KAAK,aAAa+B,KAAK,UAAnC,C,kBACE,IAA6F,CAAzEhB,EAAAA,SAASiB,MAAAA,EAAAA,EAAAA,OAA7B1C,EAAAA,EAAAA,IAA6FsC,EAAA,CAA1DR,IAAKL,EAAAA,SAASiB,IAAItC,IAArD,C,kBAAyD,IAAqB,mBAAnBqB,EAAAA,SAASiB,IAAIhC,MAAI,M,QAA5E,kB,qCASN,GACEA,KAAM,WACNiC,QACE,MAAMC,GAAQC,EAAAA,EAAAA,MACRC,GAAQC,EAAAA,EAAAA,MACRC,GAAWC,EAAAA,EAAAA,KAAS,KACxB,MAAMC,EAAO,CAAC,EAWd,OATAJ,EAAMK,MAAMH,SAASI,KAAKC,SAAQd,IAChC,GAAIA,EAAIe,SAAU,CAChB,MAAMZ,EAAMH,EAAIe,SAASC,MAAKb,GAAOA,EAAItC,KAAOwC,EAAMY,OAAOpD,KACzDsC,IACFQ,EAAKX,IAAM,CAAEnC,GAAGmC,EAAInC,GAAIM,KAAM6B,EAAI7B,MAClCwC,EAAKR,IAAM,CAAEtC,GAAGsC,EAAItC,GAAIM,KAAMgC,EAAIhC,MAEtC,KAEKwC,CAAP,IAEF,MAAO,CAACF,WACV,G,QC7BF,MAAM9B,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,KAEpE,Q,qECNOnB,MAAM,c,GACJA,MAAM,Q,UACTM,EAAAA,EAAAA,GAA2B,OAAtBN,MAAM,QAAO,OAAG,K,GAChBA,MAAM,Q,iBAKNA,MAAM,Q,GACNA,MAAM,Q,uBAKHA,MAAM,c,+DAdY0B,EAAAA,aAAeA,EAAAA,gBAAAA,EAAAA,EAAAA,OAA7CL,EAAAA,EAAAA,IAaM,MAbN,EAaM,EAZJf,EAAAA,EAAAA,GAKM,MALN,EAKM,CAJJoD,GACApD,EAAAA,EAAAA,GAEM,MAFN,EAEM,gBADJe,EAAAA,EAAAA,IAAiLQ,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAArDJ,EAAAA,WAAWiC,QAApBC,K,WAAnHvC,EAAAA,EAAAA,IAAiL,KAA7KwC,QAAK,GAAEnC,EAAAA,YAAYkC,EAAMvD,IAAML,OAAK,SAAA8D,OAAUpC,EAAAA,WAAWqC,gBAAgBH,EAAMvD,KAAK2D,KAAK,eAAmDjC,IAAK6B,EAAMvD,KAA3J,QAAiKuD,EAAMjD,MAAI,GAAAsD,MAA3K,YASA,aANJ5C,EAAAA,EAAAA,IAKMQ,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IALwBJ,EAAAA,WAAWwC,gBAAhBC,K,WAAzB9C,EAAAA,EAAAA,IAKM,OALDrB,MAAM,OAA+C+B,IAAKoC,EAAE9D,IAAjE,EACEC,EAAAA,EAAAA,GAAmC,MAAnC,GAAmCI,EAAAA,EAAAA,IAAfyD,EAAExD,MAAM,IAAC,IAC7BL,EAAAA,EAAAA,GAEM,MAFN,EAEM,gBADJe,EAAAA,EAAAA,IAA+JQ,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAA9CqC,EAAEC,YAAVC,K,WAAzGhD,EAAAA,EAAAA,IAA+J,KAA3JwC,QAAK,GAAEnC,EAAAA,WAAWyC,EAAEE,EAAKhE,IAAML,OAAK,SAAA8D,OAAUK,EAAEG,eAAeD,EAAKhE,KAAM2D,KAAK,eAA6CjC,IAAKsC,EAAKhE,KAA1I,QAAgJgE,EAAK1D,MAAI,GAAA4D,MAAzJ,aAHJ,WAPF,WAcAlD,EAAAA,EAAAA,IAMM,MANN,EAMM,EALJC,EAAAA,EAAAA,IAAyDkD,EAAA,CAA5CxE,MAAM,OAAOyE,MAAM,QAAQC,OAAO,UAC/CpD,EAAAA,EAAAA,IAAyDkD,EAAA,CAA5CxE,MAAM,OAAOyE,MAAM,QAAQC,OAAO,UAC/CpD,EAAAA,EAAAA,IAAyDkD,EAAA,CAA5CxE,MAAM,OAAOyE,MAAM,QAAQC,OAAO,UAC/CpD,EAAAA,EAAAA,IAAyDkD,EAAA,CAA5CxE,MAAM,OAAOyE,MAAM,QAAQC,OAAO,UAC/CpD,EAAAA,EAAAA,IAAyDkD,EAAA,CAA5CxE,MAAM,OAAOyE,MAAM,QAAQC,OAAO,W,+BAQnD,GACE/D,KAAM,YACNiC,MAAO9B,GAAO,KAAC6D,IAIb,MAAM9B,GAAQC,EAAAA,EAAAA,MACR8B,GAAaC,EAAAA,EAAAA,IAAI,MACjBC,GAAgBD,EAAAA,EAAAA,KAAI,IAE1BE,EAAAA,EAAAA,KAAM,IAAMlC,EAAMY,OAAOpD,KAAI,CAAC2E,EAAQC,KAEhCD,GAAUnC,EAAMqC,OAAU,iBAAmBF,IAC/CF,EAAcK,OAAQ,EACtBH,IAAUI,EAAAA,EAAAA,IAAsBvC,EAAMY,OAAOpD,IAAIgF,MAAK,EAAGC,aAEvDA,EAAOvB,cAAgB,KACvBuB,EAAO3B,OAAO4B,QAAQ,CAAElF,GAAI,KAAMM,KAAM,OAExC2E,EAAOpB,eAAeZ,SAAQa,IAC5BA,EAAEG,aAAe,KACjBH,EAAEC,WAAWmB,QAAQ,CAAElF,GAAI,KAAMM,KAAM,MAAvC,IAEFiE,EAAWO,MAAQG,EACnBR,EAAcK,OAAQ,CAAtB,IAEJ,GACC,CAAEK,WAAW,IAEf,MAAMC,EAAkB,KACvB,MAAMC,EAAe,CAAC,EAChBC,EAAQ,GAWd,OATAD,EAAaE,QAAUhB,EAAWO,MAAMpB,cAExCa,EAAWO,MAAMjB,eAAeZ,SAAQa,IACtC,MAAME,EAAOF,EAAEC,WAAWZ,MAAKa,GAAQA,EAAKhE,KAAO8D,EAAEG,eACjDD,QAAoBwB,IAAZxB,EAAKhE,IACfsF,EAAMG,KAAK,CAAEC,UAAW5B,EAAExD,KAAMqF,aAAc3B,EAAK1D,MACrD,IAEEgF,EAAMM,SAAQP,EAAaC,MAAQA,GAChCD,CAAP,EAIIQ,EAAeN,IACfhB,EAAWO,MAAMpB,gBAAkB6B,IACvChB,EAAWO,MAAMpB,cAAgB6B,EACjCjB,EAAK,gBAAiBc,KAAtB,EAGIU,EAAa,CAAChC,EAAGiC,KACjBjC,EAAEG,eAAiB8B,IACvBjC,EAAEG,aAAe8B,EACjBzB,EAAK,gBAAiBc,KAAtB,EAGF,MAAO,CAAEb,aAAYE,gBAAcoB,cAAYC,aACjD,GChFF,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,Q,SCROnG,MAAM,Y,GACJA,MAAM,Q,GAWNA,MAAM,S,0EAZbqB,EAAAA,EAAAA,IAgBM,MAhBN,EAgBM,EAfJf,EAAAA,EAAAA,GAUM,MAVN,EAUM,EATJA,EAAAA,EAAAA,GAAuG,KAAnGN,OAAK,SAAA8D,OAA8B,OAApBpC,EAAAA,WAAW2E,YAAoBxC,QAAK,eAAEnC,EAAAA,WAAU,OAAQsC,KAAK,gBAAe,OAAI,IACnG1D,EAAAA,EAAAA,GAAyH,KAArHN,OAAK,SAAA8D,OAA8B,gBAApBpC,EAAAA,WAAW2E,YAA6BxC,QAAK,eAAEnC,EAAAA,WAAU,gBAAiBsC,KAAK,gBAAe,OAAI,IACrH1D,EAAAA,EAAAA,GAAmH,KAA/GN,OAAK,SAAA8D,OAA8B,aAApBpC,EAAAA,WAAW2E,YAA0BxC,QAAK,eAAEnC,EAAAA,WAAU,aAAcsC,KAAK,gBAAe,OAAI,IAC/G1D,EAAAA,EAAAA,GAAyH,KAArHN,OAAK,SAAA8D,OAA8B,gBAApBpC,EAAAA,WAAW2E,YAA6BxC,QAAK,eAAEnC,EAAAA,WAAU,gBAAiBsC,KAAK,gBAAe,OAAI,IACrH1D,EAAAA,EAAAA,GAII,KAJAuD,QAAK,eAAEnC,EAAAA,WAAU,UAAWsC,KAAK,gBAArC,UAAoD,WAElD1D,EAAAA,EAAAA,GAAqG,KAAlGN,OAAK,SAAC,WAAU,CAAA8D,OAAqC,UAApBpC,EAAAA,WAAW2E,WAA0C,OAArB3E,EAAAA,WAAW4E,eAA/E,SACAhG,EAAAA,EAAAA,GAAwG,KAArGN,OAAK,SAAC,aAAY,CAAA8D,OAAqC,UAApBpC,EAAAA,WAAW2E,WAA0C,QAArB3E,EAAAA,WAAW4E,eAAjF,aAGJhG,EAAAA,EAAAA,GAGM,MAHN,EAGM,EAFJgB,EAAAA,EAAAA,IAAsFiF,EAAA,CAAxE1C,QAAOnC,EAAAA,Y,WAAsBA,EAAAA,WAAW8E,U,qCAAX9E,EAAAA,WAAW8E,UAASC,IAA/D,C,kBAAiE,IAAO,UAAP,c,KAAjE,6BACAnF,EAAAA,EAAAA,IAAyFiF,EAAA,CAA3E1C,QAAOnC,EAAAA,Y,WAAsBA,EAAAA,WAAWgF,a,qCAAXhF,EAAAA,WAAWgF,aAAYD,IAAlE,C,kBAAoE,IAAO,UAAP,c,KAApE,+B,CAMN,OACE9F,KAAM,UACNiC,MAAO9B,GAAM,KAAC6D,IAMZ,MAAMgC,GAAaC,EAAAA,EAAAA,IAAS,CAC1BJ,WAAW,EACXE,cAAc,EACdL,UAAW,KACXC,WAAY,OAIRO,EAAcR,IAClB,GAAkB,UAAdA,EACFM,EAAWN,UAAYA,EACO,OAA1BM,EAAWL,WAEbK,EAAWL,WAAa,OAGxBK,EAAWL,WAAuC,SAA1BK,EAAWL,WAAwB,MAAQ,WAEhE,CAEL,GAAIK,EAAWN,YAAcA,EAAY,OACzCM,EAAWN,UAAYA,EACvBM,EAAWL,WAAa,IAC1B,CAEA3B,EAAK,cAAegC,EAApB,EAEIG,EAAc,KAClBnC,EAAK,cAAegC,EAApB,EAEF,MAAO,CAAEA,aAAYE,aAAWC,cAClC,GCrDF,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAAS,GAAQ,CAAC,YAAY,qBAEzF,Q,UNuBA,GACEnG,KAAM,cACNoG,WAAY,CAAEC,SAAF,EAAYC,UAAZ,EAAuBC,QAAvB,EAAgCC,UAASA,EAAAA,GACrDvE,QACE,MAAMC,GAAQC,EAAAA,EAAAA,MACRX,GAAU0C,EAAAA,EAAAA,KAAI,GACdzC,GAAWyC,EAAAA,EAAAA,KAAI,GACfuC,GAAavC,EAAAA,EAAAA,IAAI,IAEvB,IAAIwC,EAAY,CACdC,KAAM,EACNC,SAAU,IAEZ,MAAOC,EAAU,KAChBrF,EAAQgD,OAAQ,EAEhBkC,EAAUI,WAAa5E,EAAMY,OAAOpD,IACpCqH,EAAAA,EAAAA,IAAqBL,GAAWhC,MAAK,EAAGC,aAEnCA,EAAOqC,MAAM1B,QAEfmB,EAAUjC,MAAMW,QAAQR,EAAOqC,OAC/BN,EAAUC,QAEVlF,EAAS+C,OAAQ,EAEnBhD,EAAQgD,OAAQ,CAAhB,GATD,GAaDJ,EAAAA,EAAAA,KAAM,IAAMlC,EAAMY,OAAOpD,KAAK2E,IACxBA,GAAUnC,EAAMqC,OAAU,iBAAmBF,IAC/CoC,EAAUjC,MAAQ,GAClBkC,EAAY,CACVC,KAAM,EACNC,SAAU,IAEZnF,EAAS+C,OAAQ,EACnB,IAGH,MAAMyC,EAAcjB,IACnBvE,EAAS+C,OAAQ,EAEjBkC,EAAY,IAAKA,KAAcV,GAC/BU,EAAUC,KAAO,EACjBF,EAAUjC,MAAQ,EAAlB,EAIK0C,EAAgBnC,IACnB2B,EAAY,IAAKA,KAAc3B,GAC/B2B,EAAUC,KAAO,EACjBF,EAAUjC,MAAQ,GAClB/C,EAAS+C,OAAQ,CAAjB,EAEF,MAAO,CAACqC,UAAQrF,UAAQC,WAASgF,YAAUQ,aAAWC,eACxD,GOlFF,MAAM,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASzG,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://erabbit-pc-project/./src/views/category/components/goods-item.vue","webpack://erabbit-pc-project/./src/views/category/components/goods-item.vue?729e","webpack://erabbit-pc-project/./src/views/category/sub.vue","webpack://erabbit-pc-project/./src/views/category/components/sub-bread.vue","webpack://erabbit-pc-project/./src/views/category/components/sub-bread.vue?6f1c","webpack://erabbit-pc-project/./src/views/category/components/sub-filter.vue","webpack://erabbit-pc-project/./src/views/category/components/sub-filter.vue?8f5b","webpack://erabbit-pc-project/./src/views/category/components/sub-sort.vue","webpack://erabbit-pc-project/./src/views/category/components/sub-sort.vue?1654","webpack://erabbit-pc-project/./src/views/category/sub.vue?7bf5"],"sourcesContent":["<template>\r\n  <RouterLink :to=\"`/product/${goods.id}`\" class='goods-item'>\r\n    <img :src=\"goods.picture\" alt=\"\">\r\n    <p class=\"name ellipsis\">{{ goods.name }}</p>\r\n    <p class=\"desc ellipsis\">{{ goods.desc }}</p>\r\n    <p class=\"price\">&yen;{{ goods.price }}</p>\r\n  </RouterLink>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'GoodsItem',\r\n  props: {\r\n    goods: {\r\n      type:Object,\r\n      default:() => {}\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.goods-item {\r\n  display: block;\r\n  width: 220px;\r\n  padding: 20px 30px;\r\n  text-align: center;\r\n  .hoverShadow();\r\n  img {\r\n    width: 160px;\r\n    height: 160px;\r\n  }\r\n  p {\r\n    padding-top: 10px;\r\n  }\r\n  .name {\r\n    font-size: 16px;\r\n  }\r\n  .desc {\r\n    color: #999;\r\n    height: 29px;\r\n  }\r\n  .price {\r\n    color: @priceColor;\r\n    font-size: 20px;\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./goods-item.vue?vue&type=template&id=bd0b9e64&scoped=true\"\nimport script from \"./goods-item.vue?vue&type=script&lang=js\"\nexport * from \"./goods-item.vue?vue&type=script&lang=js\"\n\nimport \"./goods-item.vue?vue&type=style&index=0&id=bd0b9e64&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\sea\\\\Desktop\\\\vue3-PROJECT\\\\erabbit-pc-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-bd0b9e64\"]])\n\nexport default __exports__","<template>\r\n  <div class='sub-category'>\r\n    <div class=\"container\">\r\n      <!-- 面包屑 -->\r\n      <SubBread />\r\n      <!-- 筛选区 -->\r\n      <SubFilter @filter-change=\"changeFilter\" />\r\n      <!-- 结果区域 -->\r\n      <div class=\"goods-list\">\r\n        <!-- 排序 -->\r\n        <SubSort @sort-change=\"sortChange\" />\r\n        <!-- 列表 -->\r\n        <ul>\r\n          <li v-for=\"goods in goodsList\" :key=\"goods.i\" >\r\n            <GoodsItem :goods=\"goods\" />\r\n          </li>\r\n        </ul>\r\n        <!-- 无限加载组件 -->\r\n        <XtxInfiniteLoading :loading=\"loading\" :finished=\"finished\"   @infinite=\"getData\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SubBread from './components/sub-bread'\r\nimport SubFilter from './components/sub-filter'\r\nimport SubSort from './components/sub-sort'\r\nimport GoodsItem from './components/goods-item'\r\nimport { findSubCategoryGoods } from '@/api/category'\r\nimport { ref, watch } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\nexport default {\r\n  name: 'SubCategory',\r\n  components: { SubBread, SubFilter, SubSort, GoodsItem },\r\n  setup () {\r\n    const route = useRoute()\r\n    const loading = ref(false)\r\n    const finished = ref(false)\r\n    const goodsList  = ref([])\r\n    // 查询参数\r\n    let reqParams = {\r\n      page: 1,\r\n      pageSize: 20\r\n    }\r\n    const  getData = () => {\r\n     loading.value = true\r\n     // 设置二级分类ID\r\n     reqParams.categoryId = route.params.id\r\n     findSubCategoryGoods(reqParams).then(({ result }) => {\r\n      // 获取事件成功\r\n      if (result.items.length) {\r\n        // 有数据 将数据追加\r\n        goodsList.value.push(...result.items)\r\n        reqParams.page++\r\n      } else {\r\n        finished.value = true\r\n      }\r\n      loading.value = false\r\n     })\r\n    }\r\n    // 在更改了二级分类的时候需要重加载数据\r\n    watch(() => route.params.id, (newVal) => {\r\n      if (newVal && route.path === ('/category/sub/' + newVal)) {\r\n        goodsList.value = []\r\n        reqParams = {\r\n          page: 1,\r\n          pageSize: 20\r\n        }\r\n        finished.value = false \r\n      }\r\n    })\r\n    // 1. 更改排序组件的筛选数据 重新请求\r\n   const sortChange = (sortParams) => {\r\n    finished.value = false\r\n    // 合并请求参数 保留之前的参数\r\n    reqParams = { ...reqParams, ...sortParams}\r\n    reqParams.page = 1\r\n    goodsList.value = []\r\n   }\r\n\r\n   // 2监听筛选区改变\r\n   const changeFilter = (filterParams) => {\r\n      reqParams = { ...reqParams, ...filterParams }\r\n      reqParams.page = 1\r\n      goodsList.value = []\r\n      finished.value = false\r\n    }\r\n    return {getData,loading,finished,goodsList,sortChange,changeFilter }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.goods-list {\r\n  background: #fff;\r\n  padding: 0 25px;\r\n  margin-top: 25px;\r\n  ul {\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    padding: 0 5px;\r\n    li {\r\n      margin-right: 20px;\r\n      margin-bottom: 20px;\r\n      &:nth-child(5n) {\r\n        margin-right: 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <XtxBread>\r\n    <XtxBreadItem to=\"/\">首页</XtxBreadItem>\r\n    <XtxBreadItem v-if=\"category.top\" :to=\"`/category/${category.top.id}`\">{{category.top.name}}</XtxBreadItem>\r\n    <Transition name=\"fade-right\" mode=\"out-in\">\r\n      <XtxBreadItem v-if=\"category.sub\" :key=\"category.sub.id\">{{category.sub.name}}</XtxBreadItem>\r\n    </Transition>\r\n  </XtxBread>\r\n</template>\r\n\r\n<script>\r\nimport { useRoute } from 'vue-router'\r\nimport { useStore } from 'vuex'\r\nimport {computed} from 'vue'\r\nexport default {\r\n  name: 'SubBread',\r\n  setup () {\r\n    const route = useRoute()\r\n    const store = useStore()\r\n    const category = computed(() => {\r\n      const cate = {}\r\n      // 完成获取数据逻辑\r\n      store.state.category.list.forEach(top => {\r\n        if (top.children) {\r\n          const sub = top.children.find(sub => sub.id === route.params.id) \r\n          if (sub) {\r\n            cate.top = { id:top.id, name: top.name  }\r\n            cate.sub = { id:sub.id, name: sub.name  }\r\n          }\r\n        }\r\n      })\r\n      return cate\r\n    })\r\n    return {category}\r\n  }\r\n}\r\n</script>","import { render } from \"./sub-bread.vue?vue&type=template&id=7a9f1fa4\"\nimport script from \"./sub-bread.vue?vue&type=script&lang=js\"\nexport * from \"./sub-bread.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\sea\\\\Desktop\\\\vue3-PROJECT\\\\erabbit-pc-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<template>\r\n  <div class=\"sub-filter\" v-if=\"filterData && !filterLoading\">\r\n    <div class=\"item\">\r\n      <div class=\"head\">品牌：</div>\r\n      <div class=\"body\">\r\n        <a @click=\"changeBrand(brand.id)\" :class=\"{active:filterData.selectedBrand===brand.id}\" href=\"javascript:;\" v-for=\"brand in filterData.brands\" :key=\"brand.id\">{{brand.name}}</a>\r\n      </div>\r\n    </div>\r\n    <div class=\"item\" v-for=\"p in filterData.saleProperties\" :key=\"p.id\">\r\n      <div class=\"head\">{{p.name}}:</div>\r\n      <div class=\"body\">\r\n        <a @click=\"changeAttr(p,attr.id)\" :class=\"{active:p.selectedProp===attr.id}\"  href=\"javascript:;\" v-for=\"attr in p.properties\" :key=\"attr.id\">{{attr.name}}</a>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div v-else class=\"sub-filter\">\r\n    <XtxSkeleton class=\"item\" width=\"800px\" height=\"40px\"  />\r\n    <XtxSkeleton class=\"item\" width=\"800px\" height=\"40px\"  />\r\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\r\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\r\n    <XtxSkeleton class=\"item\" width=\"600px\" height=\"40px\"  />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { findSubCategoryFilter } from '@/api/category'\r\nimport { useRoute } from 'vue-router'\r\nimport {ref,watch} from 'vue'\r\nexport default {\r\n  name: 'SubFilter',\r\n  setup (props, {emit}) {\r\n    // 1. 获取数据\r\n    // 2. 数据中需要全部选中，需要预览将来点击激活功能。默认选中全部\r\n    // 3. 完成渲染\r\n    const route = useRoute()\r\n    const filterData = ref(null)\r\n    const filterLoading = ref(false)\r\n    // 4. 分类发生变化的时候需要重新获取筛选数据，需要使用侦听器\r\n    watch(() => route.params.id, (newVal, oldVal) => {\r\n      // 当你从二级分类去顶级分类也会拿到ID，不能去加载数据因为它不是二级分类的ID\r\n      if (newVal && route.path === ('/category/sub/' + newVal)) {\r\n        filterLoading.value = true\r\n        newVal && findSubCategoryFilter(route.params.id).then(({ result }) => {\r\n        // 品牌全部\r\n          result.selectedBrand = null\r\n          result.brands.unshift({ id: null, name: '全部' })\r\n          // 销售属性全部\r\n          result.saleProperties.forEach(p => {\r\n            p.selectedProp = null\r\n            p.properties.unshift({ id: null, name: '全部' })\r\n          })\r\n          filterData.value = result\r\n          filterLoading.value = false\r\n        })\r\n      }\r\n    }, { immediate: true })\r\n     // 获取筛选参数\r\n     const getFilterParams = () => {\r\n      const filterParams = {}\r\n      const attrs = []\r\n      // 品牌\r\n      filterParams.brandId = filterData.value.selectedBrand\r\n      //销售属性\r\n      filterData.value.saleProperties.forEach(p => {\r\n        const attr = p.properties.find(attr => attr.id === p.selectedProp)\r\n        if (attr && attr.id !== undefined) {\r\n          attrs.push({ groupName: p.name, propertyName: attr.name })\r\n        }\r\n      })\r\n      if (attrs.length) filterParams.attrs = attrs\r\n      return filterParams\r\n    }\r\n\r\n    // 选择品牌\r\n    const changeBrand = (brandId) => {\r\n      if (filterData.value.selectedBrand === brandId) return \r\n      filterData.value.selectedBrand = brandId\r\n      emit('filter-change', getFilterParams())\r\n    }\r\n    // 选中属性\r\n    const changeAttr = (p, attrId) => {\r\n      if (p.selectedProp === attrId) return\r\n      p.selectedProp = attrId\r\n      emit('filter-change', getFilterParams())\r\n    }\r\n \r\n    return { filterData, filterLoading,changeBrand,changeAttr }\r\n  }\r\n}\r\n\r\n</script>\r\n<style scoped lang='less'>\r\n    .xtx-skeleton {\r\n      padding: 10px 0;\r\n    }\r\n  // 筛选区\r\n  .sub-filter {\r\n    background: #fff;\r\n    padding: 25px;\r\n    .item {\r\n      display: flex;\r\n      line-height: 40px;\r\n      .head {\r\n        width: 80px;\r\n        color: #999;\r\n      }\r\n      .body {\r\n        flex: 1;\r\n        a {\r\n          margin-right: 36px;\r\n          transition: all .3s;\r\n          display: inline-block;  \r\n          &.active,\r\n          &:hover {\r\n            color: @xtxColor;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import { render } from \"./sub-filter.vue?vue&type=template&id=721f5744&scoped=true\"\nimport script from \"./sub-filter.vue?vue&type=script&lang=js\"\nexport * from \"./sub-filter.vue?vue&type=script&lang=js\"\n\nimport \"./sub-filter.vue?vue&type=style&index=0&id=721f5744&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\sea\\\\Desktop\\\\vue3-PROJECT\\\\erabbit-pc-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-721f5744\"]])\n\nexport default __exports__","<template>\r\n  <div class='sub-sort'>\r\n    <div class=\"sort\">\r\n      <a :class=\"{active:sortParams.sortField===null}\" @click=\"changeSort(null)\" href=\"javascript:;\">默认排序</a>\r\n      <a :class=\"{active:sortParams.sortField==='publishTime'}\" @click=\"changeSort('publishTime')\" href=\"javascript:;\">最新商品</a>\r\n      <a :class=\"{active:sortParams.sortField==='orderNum'}\" @click=\"changeSort('orderNum')\" href=\"javascript:;\">最高人气</a>\r\n      <a :class=\"{active:sortParams.sortField==='evaluateNum'}\" @click=\"changeSort('evaluateNum')\" href=\"javascript:;\">评论最多</a>\r\n      <a @click=\"changeSort('price')\" href=\"javascript:;\">\r\n        价格排序\r\n        <i class=\"arrow up\" :class=\"{active:sortParams.sortField==='price'&&sortParams.sortMethod=='asc'}\" />\r\n        <i class=\"arrow down\" :class=\"{active:sortParams.sortField==='price'&&sortParams.sortMethod=='desc'}\" />\r\n      </a>\r\n    </div>\r\n    <div class=\"check\">\r\n      <XtxCheckbox @click=\"changeCheck\" v-model=\"sortParams.inventory\">仅显示有货商品</XtxCheckbox>\r\n      <XtxCheckbox @click=\"changeCheck\" v-model=\"sortParams.onlyDiscount\">仅显示特惠商品</XtxCheckbox>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { reactive } from 'vue'\r\nexport default {\r\n  name: 'SubSort',\r\n  setup (props,{emit}) {\r\n    // 1. 根据后台需要的参数定义数据对象\r\n    // 2. 根据数据对象，绑定组件（复选框，排序按钮）\r\n    // 3. 在操作排序组件的时候，需要反馈给数据对象\r\n    // sortField====>publishTime,orderNum,price,evaluateNum\r\n    // sortMethod====>asc为正序 desc为倒序\r\n    const sortParams = reactive({\r\n      inventory: false,\r\n      onlyDiscount: false,\r\n      sortField: null,\r\n      sortMethod: null\r\n    })\r\n\r\n    // 改变排序\r\n    const changeSort = (sortField) => {\r\n      if (sortField === 'price') {\r\n        sortParams.sortField = sortField\r\n        if (sortParams.sortMethod === null) {\r\n          // 第一次点击，默认是降序\r\n          sortParams.sortMethod = 'desc'\r\n        } else {\r\n          // 其他情况根据当前排序取反\r\n          sortParams.sortMethod = sortParams.sortMethod === 'desc' ? 'asc' : 'desc'\r\n        }\r\n      } else {\r\n        // 如果排序未改变停止逻辑  \r\n        if (sortParams.sortField === sortField)  return\r\n        sortParams.sortField = sortField\r\n        sortParams.sortMethod = null\r\n      }\r\n      // 触发sort-change事件\r\n      emit('sort-change', sortParams)\r\n    }\r\n    const changeCheck = () => {\r\n      emit('sort-change', sortParams)\r\n    }\r\n    return { sortParams, changeSort,changeCheck }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang='less'>\r\n.sub-sort {\r\n  height: 80px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n  .sort {\r\n    display: flex;\r\n    a {\r\n      height: 30px;\r\n      line-height: 28px;\r\n      border: 1px solid #e4e4e4;\r\n      padding: 0 20px;\r\n      margin-right: 20px;\r\n      color: #999;\r\n      border-radius: 2px;\r\n      position: relative;\r\n      transition: all .3s;\r\n      &.active {\r\n        background: @xtxColor;\r\n        border-color: @xtxColor;\r\n        color: #fff;\r\n      }\r\n      .arrow {\r\n        position: absolute;\r\n        border: 5px solid transparent;\r\n        right: 8px;\r\n        &.up {\r\n          top: 3px;\r\n          border-bottom-color: #bbb;\r\n            &.active {\r\n            border-bottom-color: @xtxColor;\r\n          }\r\n        }\r\n        &.down {\r\n          top: 15px;\r\n          border-top-color: #bbb;\r\n          &.active {\r\n            border-top-color: @xtxColor;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .check {\r\n    .xtx-checkbox {\r\n      margin-left: 20px;\r\n      color: #999;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import { render } from \"./sub-sort.vue?vue&type=template&id=0f0c0657&scoped=true\"\nimport script from \"./sub-sort.vue?vue&type=script&lang=js\"\nexport * from \"./sub-sort.vue?vue&type=script&lang=js\"\n\nimport \"./sub-sort.vue?vue&type=style&index=0&id=0f0c0657&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\sea\\\\Desktop\\\\vue3-PROJECT\\\\erabbit-pc-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0f0c0657\"]])\n\nexport default __exports__","import { render } from \"./sub.vue?vue&type=template&id=57ab1dbf&scoped=true\"\nimport script from \"./sub.vue?vue&type=script&lang=js\"\nexport * from \"./sub.vue?vue&type=script&lang=js\"\n\nimport \"./sub.vue?vue&type=style&index=0&id=57ab1dbf&scoped=true&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\sea\\\\Desktop\\\\vue3-PROJECT\\\\erabbit-pc-project\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-57ab1dbf\"]])\n\nexport default __exports__"],"names":["class","_createBlock","_component_RouterLink","to","$props","id","_createElementVNode","src","picture","alt","_toDisplayString","name","desc","price","props","goods","type","Object","default","__exports__","render","_createElementBlock","_createVNode","_component_SubBread","_component_SubFilter","onFilterChange","$setup","_component_SubSort","onSortChange","_Fragment","_renderList","key","i","_component_GoodsItem","_component_XtxInfiniteLoading","loading","finished","onInfinite","_component_XtxBread","_component_XtxBreadItem","top","_Transition","mode","sub","setup","route","useRoute","store","useStore","category","computed","cate","state","list","forEach","children","find","params","_hoisted_3","brands","brand","onClick","active","selectedBrand","href","_hoisted_5","saleProperties","p","properties","attr","selectedProp","_hoisted_8","_component_XtxSkeleton","width","height","emit","filterData","ref","filterLoading","watch","newVal","oldVal","path","value","findSubCategoryFilter","then","result","unshift","immediate","getFilterParams","filterParams","attrs","brandId","undefined","push","groupName","propertyName","length","changeBrand","changeAttr","attrId","sortField","sortMethod","_component_XtxCheckbox","inventory","$event","onlyDiscount","sortParams","reactive","changeSort","changeCheck","components","SubBread","SubFilter","SubSort","GoodsItem","goodsList","reqParams","page","pageSize","getData","categoryId","findSubCategoryGoods","items","sortChange","changeFilter"],"sourceRoot":""}